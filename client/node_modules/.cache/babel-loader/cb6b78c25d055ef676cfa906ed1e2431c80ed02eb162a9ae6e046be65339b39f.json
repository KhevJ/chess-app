{"ast":null,"code":"var _jsxFileName = \"/Users/khevinjugessur/Documents/multiplayer-chess/chess-game/src/Game.jsx\",\n  _s = $RefreshSig$();\nimport { useState, useMemo, useCallback, useEffect } from \"react\";\nimport { Chessboard } from \"react-chessboard\";\nimport { Chess } from \"chess.js\";\nimport CustomDialog from \"./components/CustomDialog\";\nimport sound from './chess_move_sound.mp3';\nimport blunder from './chess_blunder.m4a';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction Game({\n  players,\n  room,\n  orientation,\n  cleanup\n}) {\n  _s();\n  const chess = useMemo(() => new Chess(), []); // <- 1\n  const [fen, setFen] = useState(chess.fen()); // <- 2\n  const [over, setOver] = useState(\"\");\n  const makeAMove = useCallback(move => {\n    try {\n      const result = chess.move(move); // update Chess instance\n      setFen(chess.fen()); // update fen state to trigger a re-render\n\n      console.log(\"over, checkmate\", chess.isGameOver(), chess.isCheckmate());\n      chess.inCheck();\n      if (chess.isGameOver()) {\n        // check if move led to \"game over\"\n        if (chess.isCheckmate()) {\n          // if reason for game over is a checkmate\n          // Set message to checkmate. \n          setOver(`Checkmate! ${chess.turn() === \"w\" ? \"black\" : \"white\"} wins!`);\n          // The winner is determined by checking which side made the last move\n        } else if (chess.isDraw()) {\n          // if it is a draw\n          setOver(\"Draw\"); // set message to \"Draw\"\n        } else {\n          setOver(\"Game over\");\n        }\n      }\n      return result;\n    } catch (e) {\n      return null;\n    } // null if the move was illegal, the move object if the move was legal\n  }, [chess]);\n\n  // onDrop function\n  function onDrop(sourceSquare, targetSquare) {\n    const moveData = {\n      from: sourceSquare,\n      to: targetSquare,\n      color: chess.turn(),\n      promotion: \"q\"\n    };\n    const audio = new Audio(sound);\n    const blundr = new Audio(blunder);\n    const move = makeAMove(moveData);\n\n    // illegal move\n    if (move === null) {\n      blundr.play();\n      return false;\n    }\n    if (move !== null) audio.play();\n    return true;\n  }\n\n  // Game component returned jsx\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"board\",\n      children: [/*#__PURE__*/_jsxDEV(Chessboard, {\n        position: fen,\n        onPieceDrop: onDrop,\n        customDarkSquareStyle: {\n          backgroundColor: '#2c4573'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this), \"  \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CustomDialog // <- 5\n    , {\n      open: Boolean(over),\n      title: over,\n      contentText: over,\n      handleContinue: () => {\n        setOver(\"\");\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n_s(Game, \"b5ocUstPxAWuGUNL7RFptmYJkjA=\");\n_c = Game;\nexport default Game;\nvar _c;\n$RefreshReg$(_c, \"Game\");","map":{"version":3,"names":["useState","useMemo","useCallback","useEffect","Chessboard","Chess","CustomDialog","sound","blunder","jsxDEV","_jsxDEV","Fragment","_Fragment","Game","players","room","orientation","cleanup","_s","chess","fen","setFen","over","setOver","makeAMove","move","result","console","log","isGameOver","isCheckmate","inCheck","turn","isDraw","e","onDrop","sourceSquare","targetSquare","moveData","from","to","color","promotion","audio","Audio","blundr","play","children","className","position","onPieceDrop","customDarkSquareStyle","backgroundColor","fileName","_jsxFileName","lineNumber","columnNumber","open","Boolean","title","contentText","handleContinue","_c","$RefreshReg$"],"sources":["/Users/khevinjugessur/Documents/multiplayer-chess/chess-game/src/Game.jsx"],"sourcesContent":["import { useState, useMemo, useCallback, useEffect } from \"react\";\nimport { Chessboard } from \"react-chessboard\";\nimport { Chess } from \"chess.js\";\nimport CustomDialog from \"./components/CustomDialog\";\nimport sound from './chess_move_sound.mp3'\nimport blunder from './chess_blunder.m4a'\n\nfunction Game({ players, room, orientation, cleanup }) {\n  const chess = useMemo(() => new Chess(), []); // <- 1\n  const [fen, setFen] = useState(chess.fen()); // <- 2\n  const [over, setOver] = useState(\"\");\n\n\n  const makeAMove = useCallback(\n    (move) => {\n      try {\n        const result = chess.move(move); // update Chess instance\n        setFen(chess.fen()); // update fen state to trigger a re-render\n  \n        console.log(\"over, checkmate\", chess.isGameOver(), chess.isCheckmate());\n        chess.inCheck()\n  \n        if (chess.isGameOver()) { // check if move led to \"game over\"\n          if (chess.isCheckmate()) { // if reason for game over is a checkmate\n            // Set message to checkmate. \n            setOver(\n              `Checkmate! ${chess.turn() === \"w\" ? \"black\" : \"white\"} wins!`\n            ); \n            // The winner is determined by checking which side made the last move\n          } else if (chess.isDraw()) { // if it is a draw\n            setOver(\"Draw\"); // set message to \"Draw\"\n          } else {\n            setOver(\"Game over\");\n          }\n        }\n  \n        return result;\n      } catch (e) {\n        \n        return null;\n      } // null if the move was illegal, the move object if the move was legal\n\n    },\n    [chess]\n  );\n\n\n  // onDrop function\n  function onDrop(sourceSquare, targetSquare) {\n    const moveData = {\n      from: sourceSquare,\n      to: targetSquare,\n      color: chess.turn(),\n      promotion: \"q\",\n    };\n\n    const audio = new Audio(sound);\n    const blundr = new Audio(blunder);\n\n    const move = makeAMove(moveData);\n\n    // illegal move\n    if (move === null){\n      blundr.play();\n      return false;\n    } \n    if(move !== null) audio.play();\n\n    return true;\n  }\n\n\n  \n  \n  // Game component returned jsx\n  return (\n    <>\n      <div className=\"board\">\n        <Chessboard position={fen} onPieceDrop={onDrop} customDarkSquareStyle={{backgroundColor: '#2c4573'}} />  {/**  <- 4 */}\n      </div>\n      <CustomDialog // <- 5\n        open={Boolean(over)}\n        title={over}\n        contentText={over}\n        handleContinue={() => {\n          setOver(\"\");\n        }}\n      />\n    </>\n  );\n}\n\nexport default Game;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}